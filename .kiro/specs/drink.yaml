---
version: 2
name: bitpixi-drink
description: "Drink recipe specification for Bitpixi's Bar"

fields:
  - id: glass
    type: enum
    values: [tall, short, mug, potion, martini]
    description: "Glass type for the drink"
    
  - id: backdrop
    type: enum
    values: [counter, neon, pumpkin_night, snow_window]
    description: "Background scene for drink presentation"
    
  - id: base
    type: enum
    values: [coffee, tea, milk, juice, soda]
    description: "Primary liquid base"
    
  - id: flavors
    type: string[]
    max: 3
    description: "Flavor additions (max 3)"
    
  - id: toppings
    type: string[]
    max: 3
    description: "Drink toppings (max 3)"
    
  - id: mixMode
    type: enum
    values: [blend, layered]
    description: "How ingredients are combined"
    
  - id: color
    type: string
    pattern: "^#([A-Fa-f0-9]{6})$"
    required_if: "mixMode === 'blend'"
    description: "Hex color for blended drinks"
    
  - id: layers
    type: object[]
    optional: true
    required_if: "mixMode === 'layered'"
    description: "Layer configuration for layered drinks"
    schema:
      color:
        type: string
        pattern: "^#([A-Fa-f0-9]{6})$"
        description: "Hex color of the layer"
      percent:
        type: number
        min: 1
        max: 100
        description: "Percentage of total drink volume"
        
  - id: name
    type: string
    max: 24
    description: "Custom drink name"
    
  - id: font
    type: enum
    values: [script, serif, sans-serif, decorative, handwritten]
    description: "Font style for drink name display"
    
  - id: createdAt
    type: number
    description: "Unix timestamp of creation"
    
  - id: authorUid
    type: string
    description: "Reddit user ID of creator"

validation:
  layered:
    maxLayers: 4
    totalPercent: 100
    description: "Layered drinks must have â‰¤4 layers totaling 100%"
    
  bannedWords: ["alcohol", "beer", "wine", "vodka", "whiskey", "rum"]
  
  name:
    minLength: 1
    maxLength: 24
    description: "Drink names must be 1-24 characters"

generation:
  typescript:
    interface: "Drink"
    location: "packages/types/src/gen/types.ts"
    
  jsonSchema:
    location: "packages/types/src/gen/schemas.ts"
    
  validators:
    location: "packages/logic/src/gen/validators.ts"
    functions:
      - "validateDrink"
      - "validateBlendMode" 
      - "validateLayeredMode"
      - "validateDrinkName"
